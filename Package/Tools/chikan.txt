文字列置換 v0.4b by 星野香奈 kana@mikaka.org

◎ファイルを直接書き換えるので、必ずバックアップをとってから使って下さい。

◎何をするもの？
ファイルの中の文字列を違う文字列に一括変換するためのコマンドラインプログラムです。空白や改行も文字の一種なので、UNIXやMacintoshとの改行コードの変換や、空白の削除にも使えます。バイナリファイルでも使えます。ソースも添付します。なお、メモリに読み込めないほど巨大なファイルは扱えません。

◎どうやって使うの？
コマンドプロンプトから、
chikan 処理すべきファイル名 置換元文字列 置換先文字列
と打ち込んでください。改行や空白など、コマンドラインから打ち込みにくい文字は、次のように指定します。

/n 改行(/x0Aでも可)
/r 改行(/x0Dでも可)
/s 空白
// /
/m >
/h <
/d $
/= ~
/t タブ
/q ?
/a *
/X**=16進数指定
/x**=16進数指定

◎使用例

例１：「chikan.txt」というファイル中の「ファイル」を「ふぁいる」に変更したい
chikan chikan.txt ファイル ふぁいる

例２：全ての改行の直前に「★」を入れたい。
chikan chikan.txt /r/n ★/r/n

※Windowsファイルの改行は「/r/n」の2文字で成り立っていることに注意して下さい。

例３：sample.txtというファイルの0x01を0x00に変換したい。
chikan sample.txt /x01 /x00

例４：多数の空白を一つの空白にしたい。
chikan sample.txt /s/s /s
を何度か実行します。

例５：バッチファイルの作成
dir /b >tmp.bat
chikan tmp.bat /r/n moto/ssaki/r/nchikan/s

例６：Linuxの改行をWindowsの改行に直す
chikan sample.txt /n /r/n

例７：メールファイルに引用符を付ける
chikan sample.txt /r/n /r/n/m

◎制限
NULLへの置換はできません。対象先も対象元も、文字列は1以上の長さが必要です。また、ファイルを丸ごとメモリに読み込んでから作業するので、メモリに入りきらないような巨大ファイルは扱えません。ワイルドカードの展開は問題が多いので削除しました。例５のようにchikanを利用してchikanのバッチファイルを作ると便利です。

◎免責・転載条件
著作権は星野香奈が保留します。転載改変は自由です。フリーソフトであり、自己責任で使ってください。何か問題が起こっても補償はできません。作者への連絡先は、
kana@mikaka.org です。
Windows版はBorland C++ 5.5.1でコンパイルしました。作者自身はLinux 2.6上で、gcc version 3でコンパイルして使っています。他のコンパイラでも利用できるかもしれません。

◎謝辞
バグレポート、機能拡張の提案をしてくださった皆様、ありがとうございます。
